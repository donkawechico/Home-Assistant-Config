  - platform: yr
  - platform: mqtt
    state_topic: "stat/sensor/door/POWER"
    name: "Front Door"
    value_template: >
      {% if value=='OFF' %}
        CLOSED
      {% else %}
        OPEN
      {% endif %}
  - platform: mqtt
    state_topic: "hass/light/kitchen/strip"
    name: "MQTT Kitchen Strip"
  - platform: mqtt
    state_topic: "hass/climate/livingroom/preference"
    name: "Dew Point Preference"
  - platform: darksky
    api_key: !secret darksky_api_key
    name: weather
    latitude: !secret zone_home_lat
    longitude: !secret zone_home_long
    monitored_conditions:
      - summary
      - icon
      - nearest_storm_distance
  - platform: template
    sensors:
      donnie_home:
        friendly_name: "Donnie is at home"
        value_template: >-
          {% 
            if (is_state('device_tracker.donkawechico_s7', 'home') or
                is_state('device_tracker.donkawechico_s7', 'livingroom') or
                is_state('device_tracker.donkawechico_s7', 'bedroom') or
                is_state('device_tracker.donkawechico_s7', 'entryway') or
                is_state('device_tracker.donnie_pixel_2', 'home'))
          %} 
          home
          {% else %}
          not_home
          {% endif %}
      camera_privacy_mode:
        friendly_name: "Camera Privacy Mode"
        value_template: >
          {% if is_state('input_select.privacy_mode', 'No Cameras') or
                is_state('input_select.privacy_mode', 'Total Privacy') %}
            Locked
          {% else %}
            Open
          {% endif %}
      temperature_feels_like:
        friendly_name: 'Feels Like'
        #formula taken from http://www.srh.noaa.gov/ama/?n=heatindex
        value_template: '{{ ((-42.379 + (2.04901523 * (states.sensor.aeotech_multisensor_6_temperature.state|float)) + (10.14333127 * (states.sensor.aeotech_multisensor_6_relative_humidity.state|float)) - (0.22475541 * (states.sensor.aeotech_multisensor_6_temperature.state|float) * (states.sensor.aeotech_multisensor_6_relative_humidity.state|float)) - (6.83783 * 10**(-3) * (states.sensor.aeotech_multisensor_6_temperature.state|float)**2) - (5.481717 * 10**-2 * (states.sensor.aeotech_multisensor_6_relative_humidity.state|float)**2 )+ (1.22874 * 10**-3 * (states.sensor.aeotech_multisensor_6_temperature.state|float)**2 * (states.sensor.aeotech_multisensor_6_relative_humidity.state|float)) + (8.5282*10**-4 * (states.sensor.aeotech_multisensor_6_temperature.state|float) * (states.sensor.aeotech_multisensor_6_relative_humidity.state|float)**2) - (1.99 * 10**-6 * (states.sensor.aeotech_multisensor_6_temperature.state|float)**2 * (states.sensor.aeotech_multisensor_6_relative_humidity.state|float)**2))|round(2))*100 }}'
        unit_of_measurement: '°F x 100'
      dew_point:
        friendly_name: 'Dew Point'
        value_template: '{{ (((states.sensor.aeotech_multisensor_6_temperature.state | float - ((100 - states.sensor.aeotech_multisensor_6_relative_humidity.state | float) /5))))*100}}'
        unit_of_measurement: '°F x 100'
  - platform: time_date
    display_options:
      - 'time'
